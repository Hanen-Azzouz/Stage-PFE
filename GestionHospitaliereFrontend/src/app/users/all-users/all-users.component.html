

<main style="margin-top:auto;">

  

  <div class="container mt-3">
    <div class="row align-items-center">
      <div class="alert alert-success col-sm-6 d-flex align-items-center p-3">
        <label class="control-label me-3" for="idannc"><b>Filtrer Par</b></label>
        <select class="form-select me-2 custom-select-width" [(ngModel)]="selected" (ngModelChange)="change()">
          <option value="Status User">Etat utilisateur</option>
          <option value="Entre deux dates">Entre deux dates</option>
          <!--<option value="username">Nom utilisateur</option>-->
        </select>
      </div>
  
      <div class="col-sm-6 d-flex">
        <input class="form-control me-2" [(ngModel)]="usernameToSearch" type="text" placeholder="Enter username">
        <button type="submit" class="btn btn-info" (click)="onSearch()">Get User</button>
      </div>
    </div></div>
  
  

<!--------------------------------------------------------------------------------------->

<form #f="ngForm"  *ngIf="selected=='Status User'">
  <fieldset>
  <legend>Veuillez choisir l'etat des utilisateurs que vous souhaitez afficher :</legend>
<div class="form-check">
  <input class="form-check-input" type="radio" name="status" value="true" id="flexRadioDefault1" ngModel>
  <label class="form-check-label" for="flexRadioDefault1">
    Utilisateurs actifs
  </label>
</div>
<div class="form-check">
  <input class="form-check-input" type="radio" name="status"  value ="false" id="flexRadioDefault2" checked ngModel>
  <label class="form-check-label" for="flexRadioDefault2">
    Utilisateurs Inactifs
  </label>
</div>
<div>
  <button type="submit" class="btn btn-info" (click)="searchActifsUsers(f.value)">Consulter</button>
</div></fieldset>
</form>



   <!-------------------------------------------------------------------------------------------->
  
  <!-------------------------Form-Between two dates---------------------------------------------------->
<form #f="ngForm" *ngIf="selected=='Entre deux dates'">
  <fieldset> 
   <legend>Veuillez saisir les dates SVP :</legend>
       <div class="col-sm-6">
           <div class="form-group display-flex">
             <label class="col-sm-6 control-label"><b> Date Debut </b></label>     
             <div class="col-sm-10">
               <input type="date" class="date-start ml-5 form-control datepicker col-sm-8" name="dateDebut" #dd="ngModel" required ngModel="Date Start">
             </div>
             <div class="form-group">
              <label class="col-sm-8 control-label"><b>Date Fin </b></label>
              <div class="col-sm-10">
                <input type="date"  name="dateFin" class="date-end ml-5 form-control datepicker col-sm-8" #df="ngModel" required ngModel placeholder="Date End">
              </div>
            </div>

           </div>
         </div>
         
         
         <div>
           <button type="submit"class="btn btn-info" (click)="getUserByDateInscriptionBetween(f.value)">Consulter</button>
         </div></fieldset>

       </form>

      
<!---------------------------------------------------------------------------------------------------->

  
  
  
  
  
   <table class="table">
  <thead >
    <tr>
     <!-- <th scope="col">id User</th>style="color: firebrick;"-->
      <th scope="col"class="custom-th" >Prénom</th>
      <th scope="col"class="custom-th">Nom</th>
      <th scope="col"class="custom-th">Nom utilisateur</th>
      <!--<th scope="col">password</th>
      <th scope="col"class="custom-th">Téléphone</th>
      <th scope="col"class="custom-th">Email</th>-->
     <th scope="col"class="custom-th">Etat Compte</th>
      <!-- <th scope="col">Date Inscription</th>-->
      <th scope="col"class="custom-th">Role</th>
      <th scope="col"class="custom-th"[colSpan]="5" style="align-content: center;">Actions</th>

    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor=" let i of usersList | paginate: { itemsPerPage: 3, currentPage: p}; let j = index">
        <!---- <tr *ngFor=" let i of list">-->
        <tr>
         <!---<td>{{i.idUser}}</td>-->
          <td>{{i.firstName}}</td>
          <td> {{i.lastName}}</td>
           <td>{{i.username}}</td>
          <!--<td>{{i.password}}</td>
          <td>{{i.phoneNumber}}</td>
          <td>{{i.email}}</td>-->
          
          <td [ngSwitch]="i.accountNonLocked">
            <span *ngSwitchCase="false">Inactif</span>
            <span *ngSwitchCase="true">Actif</span>
          </td>  
        <!--  <td>{{i.dateInscription}}</td>-->
          <td >{{i.role.roleName}}</td>
          <td>
            <button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#userModal"
              (click)="afficherOneUser(i.idUser)">
              Détail
            </button></td>
  
           <td><button type="button" class="btn btn-outline-primary" (click)="update(i.idUser)">Modifier</button></td> 
           <td><button type="button" class="btn btn-outline-primary" (click)="lockUserAccount(i.username)">Activer </button></td>
           <td><button type="button" class="btn btn-outline-primary" (click)="UnlockUserAccount(i.username)">Désactiver</button></td>  
            <td><button type="button" class="btn btn-outline-danger" (click)="delete(i.idUser)">Supprimer</button>
          </td>

        </tr>
      </ng-container>
  </tbody>
</table>
<div class="pagination">
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>


    <!-- Modal Détail-->
  <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Détail User</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <!-- main content modal -->
          <table class="table align-items-center table-flush ">
            <thead class="thead-light">
              <tr>
               <!--   <th scope="col">id User</th>
                  <th scope="col"class="custom-th">Prénom</th>
                  <th scope="col"class="custom-th">Nom</th>
                  <th scope="col"class="custom-th">Nom utilisateur</th>-->
                  <!--<th scope="col">password</th>-->
                  <th scope="col"class="custom-th">Téléphone</th>
                  <th scope="col"class="custom-th">Email</th>
                  <th scope="col">Date Naissance</th>
                  <th scope="col">Date Inscription</th>
                  <!--<th scope="col">Role</th>-->
              </tr>
            </thead>

            <tbody>
              <tr>

             <!--   <td>{{user.idUser}}</td>
                <td>{{user.firstName}}</td>
                <td> {{user.lastName}}</td>
                 <td>{{user.username}}</td>
             <td>{{i.password}}</td>-->
               <td>{{user.phoneNumber}}</td>
                <td>{{user.email}}</td>
                <td>{{user.dateNaissance}}</td>  
                <td>{{user.dateInscription}}</td>
               <!-- <td >{{user.role.roleName}}</td>-->
               
                

              </tr>
            </tbody>
          </table>


          <!-- fin main content Modal -->

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal"(click)="closeModal()">Close</button>

        </div>
      </div>
    </div>
  </div>

  <!--fin modal one contrat-->
   <!--contenu-->






<!--content area-->
</main>